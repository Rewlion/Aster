#include "frame.inc.tfx"
#include "mesh.inc.tfx"

technique TestStaticMesh {
  support scope FrameScope;
  support scope StaticModelScope;

  USE_STATIC_MESH();

  #hlsl
    struct VsOutput
    {
      float4 pos: SV_Position;
      float2 uv: TEXTURE0;
    };

    VsOutput vs_main(TestStaticMesh_input input)
    {
      float4x4 mvp = FrameScope.viewProj;
      mvp = mul(mvp, StaticModelScope.modelTm);

      VsOutput output;
      output.pos = mul(mvp, float4(input.pos, 1.0));
      output.uv = input.uv;

      return output;
    }

    float4 ps_main(VsOutput input): SV_Target0
    {
      return albedoTex.Sample(modelSampler, input.uv);
    }
  #end

  compile(vs_6_1, vs_main);
  compile(ps_6_1, ps_main);
};
